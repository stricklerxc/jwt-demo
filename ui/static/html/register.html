<!DOCTYPE html>
<html>
    <head>
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.css" integrity="sha512-3icgkoIO5qm2D4bGSUkPqeQ96LS8+ukJC7Eqhl1H5B2OJMEnFqLmNDxXVmtV/eq5M65tTDkUYS/Q0P4gvZv+yA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

        <!-- Bootstrap -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" integrity="undefined" crossorigin="anonymous">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

        <!-- JQuery -->
        <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

        <!-- Custom stylesheets -->
        <link href="css/register.css" rel="stylesheet">

    </head>

    <body>
        <div class="card bg-light">
            <article class="card-body mx-auto" style="max-width: 400px;">
                <h4 class="card-title mt-3 text-center">Create Account</h4>
                <p class="text-center">Get started with your free account</p>

                <form id="register-form" action="/register" method="POST">

                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-envelope"></i> </span>
                     </div>
                    <input name="username" class="form-control" placeholder="Username" type="text">
                </div> <!-- form-group// -->

                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                    </div>
                    <input name="password" class="form-control" placeholder="Create password" type="password">
                </div> <!-- form-group// -->

                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                    </div>
                    <input class="form-control" placeholder="Repeat password" type="password">
                </div> <!-- form-group// -->

                <div class="form-group">
                    <button type="submit" class="w-100 btn btn-primary btn-block"> Create Account  </button>
                </div> <!-- form-group// -->

                <p class="text-center">Have an account? <a href="/login">Log In</a> </p>
                <div id=register-status></div>

                <script>
                    $("#register-form").submit(function(event) {
                        event.preventDefault();
                        $.ajax({
                            url: $(this).attr("action"),
                            type: 'POST',
                            data: $(this).serialize(),
                            dataType: 'text',
                            success: function(data) {
                                $("#register-status").empty().append("<p class='text-center' style='color:green'> Successfully registered! </p>");
                                window.location.replace("/login")
                            },
                            error: function(data, text, error) {
                                console.log(error)
                                $("#register-status").empty().append("<p class='text-center' style='color:red'> " + data.responseText + " </p>");
                            }
                        })
                    })
                </script>
            </form>
            </article>
        </div> <!-- card.// -->
    </body>
</html>
